{% extends "base.html" %}
{% load static %}

{% block title %}ì·¨ë¯¸ ì„ íƒ{% endblock %}

{% block extra_style %}
<style>

.content-box, .additional-box {
  width: 100%;
  max-width: 1000px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  box-sizing: border-box;
}

.content-box {
  background-color: #fff;
  padding: 30px;
  border-radius: 30px;
}

/* ì„¤ëª… í…ìŠ¤íŠ¸ */
.instruction-box {
  width: 100%;
  text-align: left;
  margin-bottom: 50px;
  margin-left: 50px;
}

.instruction-box p {
  color: #333;
}

.description-text {
  font-size: 1rem;
  font-weight: 400;
}

/* ë²„íŠ¼ ì˜ì—­ */
.btn {
  font-size: 1.2rem;
  font-weight: 500;
}

.hobby-buttons {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 50px;
  width: fit-content;
  margin: 0 auto;
}

.hobby-btn {
  width: 100%;
  height: 60px;
}

.next-btn {
  height: 60px;
  font-weight: 500;
}

.next-button-wrap {
  display: flex;
  justify-content: center;
  width: 100%;
  margin-top: 50px;
}

/* í† ê¸€ ë²„íŠ¼ */
.other-hobby-toggle {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px 30px;
  cursor: pointer;
  width: 100%;
  max-width: 1000px;
}

.other-hobby-title {
  font-size: 20px;
  font-weight: bold;
  margin-right: 680px;
}

.toggle-icon {
  font-size: 22px;
  transition: transform 0.3s ease;
  margin-left: 10px;
}

.additional-box {
  width: 100%;
  background-color: #f5f5f5;
  /* padding: 40px 50px; */
  border-radius: 20px;
  margin-top: 40px;
  box-sizing: border-box;
  text-align: center;
}

/* í† ê¸€ë¡œ ì—´ë¦¬ëŠ” ì½˜í…ì¸  */
.other-hobby-section {
  display: none;
  width: 100%;
  padding: 20px 30px;
  border-radius: 20px;
  text-align: center;
}

.other-hobby-description {
  font-size: 1rem;
  font-weight: 400;
  color: #555;
  margin-bottom: 20px;
  line-height: 1.5;
}

.section-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: #333;
  margin-bottom: 10px;
  margin-top: 0px;
}

</style>
{% endblock %}

{% block content %}
<div class="container">

  <div class="center-container">

    <!-- í˜ì´ì§€ ì œëª© -->
    <h1 class="page-title">ì·¨ë¯¸ ì˜ì—­ ì…ë ¥í•˜ê¸°</h1>

    <!-- ì£¼ìš” ì½˜í…ì¸  ë°•ìŠ¤ -->
    <div class="content-box">

      <!-- ì„¤ëª… ë°•ìŠ¤ -->
      <div class="instruction-box">
        <p class="section-title">ì·¨ë¯¸ ì˜ì—­ ì„ íƒ</p>
        <p class="description-text">
          ì•„ë˜ í•­ëª©ì—ì„œ ì´ìš©ìë‹˜ì˜ ì·¨ë¯¸ë¥¼ ì„ íƒí•˜ê³  â€˜ë‹¤ìŒâ€™ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.<br>
          ë§Œì•½ ê³ ë¥´ê³  ì‹¶ì€ ì·¨ë¯¸ê°€ ì—†ëŠ” ê²½ìš°, í•˜ë‹¨ â€˜ë‹¤ë¥¸ ì·¨ë¯¸ê°€ ê¶ê¸ˆí•´ìš”â€™ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.
        </p>
      </div>

      <!-- ì·¨ë¯¸ ì„ íƒ í¼ -->
      <form method="post" action="{% url 'hobby-select' %}">
        {% csrf_token %}

        <div class="hobby-buttons">
          <button type="button" onclick="selectHobby('ì‚¬ì§„ ì´¬ì˜')" class="btn hobby-btn" data-hobby="ì‚¬ì§„ ì´¬ì˜">ì‚¬ì§„ ì´¬ì˜</button>
          <button type="button" onclick="selectHobby('SNS')" class="btn hobby-btn" data-hobby="SNS">SNS</button>
          <button type="button" onclick="selectHobby('ê²Œì„')" class="btn hobby-btn" data-hobby="ê²Œì„">ê²Œì„</button>
          <button type="button" onclick="selectHobby('ì˜ìƒ ë³´ê¸°')" class="btn hobby-btn" data-hobby="ì˜ìƒ ë³´ê¸°">ì˜ìƒ ë³´ê¸°</button>
          <button type="button" onclick="selectHobby('ê·¸ë¦¼')" class="btn hobby-btn" data-hobby="ê·¸ë¦¼">ê·¸ë¦¼</button>
          <button type="button" onclick="selectHobby('ì—¬í–‰')" class="btn hobby-btn" data-hobby="ì—¬í–‰">ì—¬í–‰</button>
          <button type="button" onclick="selectHobby('ìŒì•… ê°ìƒ')" class="btn hobby-btn" data-hobby="ìŒì•… ê°ìƒ">ìŒì•… ê°ìƒ</button>
          <button type="button" onclick="selectHobby('ë…ì„œ')" class="btn hobby-btn" data-hobby="ë…ì„œ">ë…ì„œ</button>
          <button type="button" onclick="selectHobby('ìš´ë™')" class="btn hobby-btn" data-hobby="ìš´ë™">ìš´ë™</button>

        </div>

        <!-- ì„ íƒí•œ ê°’ ì „ë‹¬ -->
        <input type="hidden" name="selected_hobby" id="selected_hobby">

        <div class="next-button-wrap">
          <button type="submit" name="action_type" value="next" class="btn next-btn">ë‹¤ìŒ â–¶</button>
        </div>
      </form>

    </div> <!-- content-box ë -->

    <!-- ì¶”ê°€ ì½˜í…ì¸  ë°•ìŠ¤ (ë‹¤ë¥¸ ì·¨ë¯¸ ì„ íƒ í† ê¸€) -->
    <div class="additional-box">

      <div class="other-hobby-toggle" onclick="toggleOtherHobby()">
        <p class="other-hobby-title">ë‹¤ë¥¸ ì·¨ë¯¸ê°€ ê¶ê¸ˆí•´ìš” <span class="emoji">ğŸ˜Ÿ</span></p>
        <span class="toggle-icon" id="toggle-icon">â–¼</span>
      </div>

      <div class="other-hobby-section" id="toggle-content">
        <p class="other-hobby-description">
          ìœ„ ëª©ë¡ì— ë‚´ ì·¨ë¯¸ê°€ ë¹ ì ¸ ìˆëŠ” ì´ìš©ìë‹˜, ë˜ëŠ” í‰ì†Œ ì¦ê¸°ëŠ” ì·¨ë¯¸ê°€ ì—†ëŠ” ì´ìš©ìë‹˜ì„ ìœ„í•´ ì¤€ë¹„í–ˆì–´ìš”.<br>
          ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™í•´ ë‚˜ì™€ ë¹„ìŠ·í•œ ì´ìš©ìê°€ ì¦ê¸°ëŠ” ì·¨ë¯¸ë¥¼ í™•ì¸í•˜ê±°ë‚˜ ìƒ‰ë‹¤ë¥¸ ë‚˜ë§Œì˜ ì·¨ë¯¸ë¥¼ ì…ë ¥í•´ë³´ì„¸ìš”!
        </p>

        <form method="post" action="{% url 'hobby-select' %}">
          {% csrf_token %}
          <button type="submit" name="action_type" value="recommend" class="btn other-hobby-btn">
            ë‹¤ë¥¸ ì·¨ë¯¸ ì‚´í´ë³´ê¸° ğŸ”
          </button>
        </form>

      </div>

    </div> <!-- additional-box ë -->

  </div> <!-- center-container ë -->

</div> <!-- container ë -->
{% endblock %}

{% block extra_script %}
<script>
  function selectHobby(hobby) {
  const hiddenInput = document.getElementById('selected_hobby');
  const button = event.target;

  // ì´ëª¨ì§€ë¥¼ ì •ì˜í•˜ëŠ” ê°ì²´
  const emojiMap = {
    'ì‚¬ì§„ ì´¬ì˜': 'ğŸ“·',
    'SNS': 'ğŸ“±',
    'ê²Œì„': 'ğŸ®',
    'ì˜ìƒ ë³´ê¸°': 'ğŸ¬',
    'ê·¸ë¦¼': 'ğŸ¨',
    'ì—¬í–‰': 'âœˆï¸',
    'ìŒì•… ê°ìƒ': 'ğŸµ',
    'ë…ì„œ': 'ğŸ“š',
    'ìš´ë™': 'ğŸ‹ï¸â€â™‚ï¸'
  };

  // ë²„íŠ¼ì´ ì´ë¯¸ ì„ íƒëœ ìƒíƒœë¼ë©´, í•´ì œ
  if (button.classList.contains('active')) {
    button.classList.remove('active'); // ì„ íƒ í•´ì œ
    hiddenInput.value = ''; // ì„ íƒëœ ì·¨ë¯¸ê°’ ì´ˆê¸°í™”
    button.textContent = hobby; // ì›ë˜ í…ìŠ¤íŠ¸ë¡œ ë³µì›
  } else {
    // ë²„íŠ¼ì´ ì„ íƒë˜ì§€ ì•Šì€ ìƒíƒœë¼ë©´, ì„ íƒ
    const buttons = document.querySelectorAll('.hobby-btn');
    buttons.forEach(btn => {
      btn.classList.remove('active'); // ëª¨ë“  ë²„íŠ¼ ì„ íƒ í•´ì œ
      // ì„ íƒë˜ì§€ ì•Šì€ ë²„íŠ¼ì€ ì›ë˜ í…ìŠ¤íŠ¸ë¡œ ë³µì›
      btn.textContent = btn.getAttribute('data-hobby'); 
    }); 

    button.classList.add('active'); // ì„ íƒëœ ë²„íŠ¼ í‘œì‹œ
    hiddenInput.value = hobby; // ì„ íƒí•œ ì·¨ë¯¸ê°’ ì €ì¥
    button.textContent = emojiMap[hobby] || hobby; // ì´ëª¨ì§€ë¡œ ë³€ê²½
  }
}

function toggleOtherHobby() {
  const content = document.getElementById('toggle-content');
  const icon = document.getElementById('toggle-icon');

  if (content.style.display === 'block') {
    content.style.display = 'none';
    icon.textContent = 'â–¼';  // í† ê¸€ ë²„íŠ¼ ì•„ì´ì½˜ì´ â–¼ë¡œ ë³€ê²½
  } else {
    content.style.display = 'block';
    icon.textContent = 'â–²';  // í† ê¸€ ë²„íŠ¼ ì•„ì´ì½˜ì´ â–²ë¡œ ë³€ê²½
  }
}
</script>
{% endblock %}
